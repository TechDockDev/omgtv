# PocketLOL Content Service environment variables
# Copy this file to .env and adjust values for your environment

NODE_ENV=development
HTTP_HOST=0.0.0.0
HTTP_PORT=4600
HTTP_BODY_LIMIT=1048576
GRPC_BIND_ADDRESS=0.0.0.0:50061
LOG_LEVEL=debug

# Shared service-to-service secret used by API Gateway and peer services
SERVICE_AUTH_TOKEN=change-me-service-token

# CDN base URL for building asset links
CDN_BASE_URL=https://cdn.local.pocketlol

# Default owner/admin IDs used when upstream systems do not supply explicit values
DEFAULT_OWNER_ID=00000000-0000-0000-0000-000000000001

# PostgreSQL connection string consumed by Prisma
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/pocketlol_content?schema=public

# Redis connection for caching, event emission, and trending metrics
REDIS_URL=redis://localhost:6379

# Downstream service URLs for engagement progress + entitlements
ENGAGEMENT_SERVICE_URL=http://localhost:4605
SUBSCRIPTION_SERVICE_URL=http://localhost:4606
SERVICE_REQUEST_TIMEOUT_MS=5000

# Cache TTLs in seconds for viewer catalog payloads
FEED_CACHE_TTL_SECONDS=60
SERIES_CACHE_TTL_SECONDS=120
RELATED_CACHE_TTL_SECONDS=180

# Mobile app feed shaping defaults
MOBILE_HOME_FEED_LIMIT=20
MOBILE_HOME_CAROUSEL_LIMIT=5
MOBILE_HOME_CONTINUE_WATCH_LIMIT=6
MOBILE_HOME_SECTION_ITEM_LIMIT=12
MOBILE_REELS_PAGE_SIZE=20
MOBILE_STREAMING_TYPE=HLS
MOBILE_DEFAULT_PLAN_PURCHASED=true
MOBILE_DEFAULT_CAN_GUEST_WATCH=true

# Redis keys used for catalog event stream and engagement metrics
CATALOG_EVENT_STREAM_KEY=catalog:events
TRENDING_SORTED_SET_KEY=catalog:trending
RATINGS_HASH_KEY=catalog:ratings

# OpenTelemetry / observability configuration
OTEL_SERVICE_NAME=content-service
# OTLP HTTP collector endpoints (set when observability collector is deployed)
OTEL_TRACES_ENDPOINT=http://localhost:4318/v1/traces
OTEL_METRICS_ENDPOINT=http://localhost:4318/v1/metrics
OTEL_METRICS_EXPORT_INTERVAL_MS=60000
